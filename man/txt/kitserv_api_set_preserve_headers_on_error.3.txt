kitserv_api_set_preserve_headers_on_error(3)

SYNOPSIS
     library "kitserv"

     #include <kitserv.h>

     void
     kitserv_api_set_preserve_headers_on_error(struct kitserv_client*,
	 bool preserve_enabled);

DESCRIPTION
     The kitserv_api_set_preserve_headers_on_error() function instructs Kit-
     serv not to discard headers when returning an error response to the
     client.

     Normally, when an error response is generated, Kitserv wipes out both the
     headers and body of the response to create a canned response. However, if
     the endpoint so wishes, they may use
     kitserv_api_set_preserve_headers_on_error() and
     kitserv_api_set_preserve_body_on_error() to override the response sent.
     For example, this could be used to include a custom warning message on a
     403 response.

     If the body is preserved, the headers are also preserved. This is to fa-
     cilitate setting the content-type header for the body that the endpoint
     has prepared.

     Note that, if the body is discarded but the headers are not, a content-
     type header will be added. So, do not add this header in the endpoint as
     it will conflict with the Kitserv header. This is in addition to headers
     already automatically added by Kitserv. See kitserv(0) for more informa-
     tion.

COPYRIGHT
     Copyright (c) 2023 Jmcgee1125.

     Kitserv is licensed under the GNU Affero GPL v3. You are free to redis-
     tribute and modify this code as you see fit, provided that you make the
     source code freely available under these terms.
