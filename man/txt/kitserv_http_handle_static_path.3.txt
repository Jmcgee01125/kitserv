http_handle_static_path(3)

SYNOPSIS
     library "kitserv"

     #include <kitserv.h>

     int
     http_handle_static_path(struct kitserv_client*, const char* path,
	 struct kitserv_request_context* ctx);

DESCRIPTION
     The http_handle_static_path() function serves a static file using the
     given path and context.  It is recommended to finish API handling after
     calling this function, as the response will be fully set up.

     The path is served relative to the root directory of the context struct.
     The context may define fallback resources to be searched if the original
     path does not work. These paths are also relative to the context root.

     NULL may be passed as the context. In this case, Kitserv will use the de-
     fault context that was passed during server startup. This can be useful
     for implementing authentication, as the request can be redirected through
     the API for authentication before returning to a standard Kitserv re-
     sponse.

RETURN VALUE
     On success, this function returns 0. On failure, this function returns
     -1, setting errno and a corresponding HTTP response status.

ERRORS
     This function shall fail if:

     HTTP 403 / EACCES
	     The path was found, but the server did not have permissions to
	     open it.

     HTTP 405 / ENOTSUP
	     The request method was not GET or HEAD.

     HTTP 414 / ENAMETOOLONG
	     The total path length generated was too long.

     HTTP 500 / ENOMEM
	     There was not enough space to store the headers for this re-
	     sponse.  Sets HTTP 500, as this is unexpected.

     This function may also fail for any reason that open(2) may fail. In this
     case, HTTP 500 will be set.

COPYRIGHT
     Copyright (c) 2023 Jmcgee1125.

     Kitserv is licensed under the GNU Affero GPL v3. You are free to redis-
     tribute and modify this code as you see fit, provided that you make the
     source code freely available under these terms.
