kitserv_http_header_add(3)

SYNOPSIS
     library "kitserv"

     #include <kitserv.h>

     int
     kitserv_http_header_add(struct kitserv_client*, const char* key,
	 const char* fmt);

     int
     kitserv_http_header_add_content_type(struct kitserv_client*,
	 const char* mime);

     int
     kitserv_http_header_add_content_type_guess(struct kitserv_client*,
	 const char* extension);

     int
     kitserv_http_header_add_last_modified(struct kitserv_client*,
	 time_t time);

DESCRIPTION
     The kitserv_http_header_add() family of functions add formatted headers
     to the current response.

     The kitserv_header_add() function will append a printf-style format
     string to the headers, using the given key as the name of the header.
     This is the most general header append function. Do not include the key
     in the format string.

     The kitserv_http_header_add_content_type() function will append a con-
     tent-type header to the response, using the given mime argument as the
     value string. Do not forget to set this header in responses.

     The kitserv_http_header_add_content_type_guess() function will append a
     content-type header to the response in the same manner as
     kitserv_http_header_add_content_type(), but will guess the mime type to
     use based on the extension given. The extension should include the lead-
     ing period, e.g., ".txt". If the extension is not recognized by Kitserv,
     a type of "application/octet-stream" is used instead. For this reason, it
     is recommended to use kitserv_http_header_add_content_type() instead,
     where possible.

     The kitserv_http_header_add_last_modified() function will append a last-
     modified header to the response. This time will be formatted according to
     RFC 9110.

RETURN VALUE
     On success, these functions return 0. On failure, they return -1, setting
     errno and a corresponding HTTP response status.

ERRORS
     These functions shall fail if:

     HTTP 507 / ENOMEM
	     There is not enough space in the header buffer to store this
	     header.  The response status will be set to HTTP 507.

COPYRIGHT
     Copyright (c) 2023 Jmcgee1125.

     Kitserv is licensed under the GNU Affero GPL v3. You are free to redis-
     tribute and modify this code as you see fit, provided that you make the
     source code freely available under these terms.
